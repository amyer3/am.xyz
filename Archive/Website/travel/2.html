<!DOCTYPE html>
<meta charset="utf-8">
<style>
    .land {
        fill: rgb(0, 183, 0);
        stroke-opacity: 1;
    }
    .point{
        fill: white;
    }
    .graticule {
        fill: none;
        stroke: white;
        stroke-width:.5;
    }
    .label{
        font-size: 35pt;
        fill: black;
    }
</style>
<body>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://d3js.org/topojson.v1.min.js"></script>
<script>

    var width = window.innerWidth,
        height = window.innerHeight;

    var projection = d3.geoNaturalEarth1()
        .translate([width/2 , height/2])
        .scale(height/3);

    var canvas = d3.select("body").append("canvas")
        .attr("width", width)
        .attr("height", height);

    var context = canvas.node().getContext("2d");

    var path = d3.geoPath()
        .projection(projection)
        .context(context);

    d3.json("https://gist.githubusercontent.com/mbostock/4090846/raw/d534aba169207548a8a3d670c9c2cc719ff05c47/world-110m.json", function(error, world) {
        if (error) throw error;

        var land = topojson.feature(world, world.objects.land);

        d3.timer(function(elapsed) {
            context.clearRect(0, 0, width, height);

            context.beginPath();
            path(land);
            context.fill();
        });

    });

    d3.json("places.json", function(error, places){
        if (error) throw error;

        canvas.append("g").attr("class","points")       //appends enclosing class: points
            .selectAll("text").data(places.features)
            .enter().append("path")
            .attr("class", "point")                     // appends each point as class point
            .attr("d", path);

        //format point text
        canvas.append("g").attr("class","labels")   // appends enclosing class: labels
            .selectAll("text").data(places.features)
            .enter().append("text")                 //appends text
            .attr("class", "label")                 // sets class to label
            .text(function(d) { return d.properties.name });

    });

    d3.select(self.frameElement).style("height", height + "px");

</script>
</body>